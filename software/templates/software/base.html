{# software/templates/software/base.html #}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}FileCR Clone{% endblock %}</title>
    <meta name="csrf-token" content="{{ csrf_token }}">

    {# Bootstrap CSS CDN #}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    {# Font Awesome CDN for Icons #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    {# Your custom CSS - should be after Bootstrap for overrides #}
    <link rel="stylesheet" href="{% static 'software/style.css' %}">

    {# Other head content like canonical URLs #}
    {% block head_extra %}{% endblock %}

    {# NEW: Meta Description #}
    {% block meta_description %}
        <meta name="description" content="Download free software, apps, games, and utilities for Windows. Secure, fast, and easy downloads for all your needs.">
    {% endblock meta_description %}

    {# --- GLOBAL STRUCTURED DATA (for WebSite and Organization) --- #}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "SoftVault", {# Your Website Name #}
      "url": "{{ request.scheme }}://{{ request.get_host }}/", {# CORRECTED LINE #}
      "potentialAction": {
        "@type": "SearchAction",
        "target": "{{ request.scheme }}://{{ request.get_host }}{% url 'software:search-results' %}?q={query}", {# CORRECTED LINE #}
        "query-input": "required name=query"
      }
    }
    </script>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "SoftVault Inc.", {# Your Company Name #}
      "url": "{{ request.scheme }}://{{ request.get_host }}/", {# CORRECTED LINE #}
      "logo": "{{ request.build_absolute_uri }}{% static 'software/img/softvault-logo.png' %}", {# IMPORTANT: Update this path to your actual company logo #}
      "sameAs": [ {# Add links to your social media profiles, if any #}
        "https://www.facebook.com/yourcompanypage",
        "https://twitter.com/yourcompanyhandle",
        "https://www.linkedin.com/company/yourcompany",
        "https://www.instagram.com/yourcompany"
      ]
    }
    </script>
    {# --- END GLOBAL STRUCTURED DATA --- #}
    
</head>
<body>
<header class="bg-dark text-white py-3"> {# Dark background, white text, padding #}
    <div class="container d-flex justify-content-between align-items-center"> {# Centered content, flex for alignment #}
            <a class="navbar-brand" href="{% url 'software:index' %}">
                {# YOUR NEW SVG LOGO GOES HERE #}
                <svg width="180" height="40" viewBox="0 0 180 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-labelledby="logoTitle logoDesc">
                  <title id="logoTitle">SoftVault Logo</title>
                  <desc id="logoDesc">A logo for SoftVault, featuring the name and a small download icon.</desc>

                  <text x="10" y="28" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="green">Soft</text>
                  <text x="75" y="28" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="blue">Vault</text>
                  
                  <path d="M150 15 L158 15 L158 8 L162 8 L154 0 L146 8 L150 8 Z M150 18 L150 20 L158 20 L158 18 Z" fill="blue"/>
                </svg>
            </a>
        <form action="{% url 'software:search-results' %}" method="get" class="d-flex" id="search-form"> {# Flex for inline elements #}
            <input type="text" name="q" placeholder="Search software..." class="form-control me-2" required /> {# Bootstrap form control #}
            <button type="submit" class="btn btn-outline-light">Search</button> {# Bootstrap button #}
        </form>
    </div>
</header>

<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom"> {# Light navbar, bottom border #}
    <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0"> {# Using me-auto for left alignment #}
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="{% url 'software:index' %}">Home</a>
                </li>
                {# Dynamic Category List for Header - NOW USES 'header_categories' #}
                {% for category in header_categories %} {# <--- CHANGED VARIABLE NAME HERE #}
                    <li class="nav-item">
                        <a class="nav-link" href="{{ category.get_absolute_url }}">{{ category.name }}</a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</nav>

{# This main block now becomes a flexible container for content and sidebars #}
<main class="container my-4"> {# Centered content area with vertical margin #}
    {# Message Display Area - Placed directly inside the main container #}
    {% if messages %}
        <div class="row"> {# Wrap messages in a row for proper Bootstrap grid alignment #}
            <div class="col-12"> {# Messages will span the full width of the container #}
                {% for message in messages %}
                    <div class="alert {% if message.tags %}alert-{{ message.tags }}{% else %}alert-info{% endif %} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {# END Message Display Area #}

    <div class="row"> {# This row will contain the columns defined by child templates #}
        {% block main_content_area %}
            {# Default content if no specific layout is defined by child templates #}
            <div class="col">
                {% block content %}{% endblock %} 
            </div>
        {% endblock %}
    </div>
</main>

{# Full Footer Section - Similar to FileCR #}
<footer class="bg-dark text-white pt-5 pb-3"> {# Dark background, white text, padding top/bottom #}
    <div class="container">
        <div class="row mb-4"> {# Row for newsletter/logo section #}
            <div class="col-md-6 mb-4 mb-md-0">
                <h4 class="fw-bold text-success mb-3">Join Our Newsletter</h4>
                <p class="text-muted small">Stay up-to-date with the latest software releases and news. No spam, guaranteed!</p>
                {# Placeholder for Newsletter Form #}
                <form class="d-flex newsletter-form">
                    <input type="email" class="form-control me-2" placeholder="Enter your email" aria-label="Email for newsletter">
                    <button type="submit" class="btn btn-primary">Subscribe</button>
                </form>
            </div>
            <div class="col-md-6 text-md-end">
                {# Logo Placeholder (can reuse the header SVG or a simpler one) #}
                <a class="d-inline-block mb-3" href="{% url 'software:index' %}">
                    <svg width="180" height="40" viewBox="0 0 180 40" fill="none" xmlns="http://www.w3.org/2000/svg" aria-labelledby="footerLogoTitle footerLogoDesc">
                        <title id="footerLogoTitle">SoftVault Footer Logo</title>
                        <desc id="footerLogoDesc">A logo for SoftVault, featuring the name and a small download icon.</desc>
                        <text x="10" y="28" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="green">Soft</text>
                        <text x="75" y="28" font-family="Arial, sans-serif" font-size="26" font-weight="bold" fill="blue">Vault</text>
                        <path d="M150 15 L158 15 L158 8 L162 8 L154 0 L146 8 L150 8 Z M150 18 L150 20 L158 20 L158 18 Z" fill="blue"/>
                    </svg>
                </a>
                <p class="text-muted small">Your ultimate source for free software downloads.</p>
            </div>
        </div>

        <hr class="border-secondary my-4"> {# Separator line #}

        <div class="row"> {# Row for link columns and social media #}
            <div class="col-md-4 mb-3">
                <h5 class="text-white mb-3">Categories</h5>
                <ul class="list-unstyled">
                    {# Dynamic Categories - reuse header_categories variable #}
                    {% for category in header_categories %}
                        <li><a href="{{ category.get_absolute_url }}" class="text-muted text-decoration-none py-1 d-block">{{ category.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            <div class="col-md-4 mb-3">
                <h5 class="text-white mb-3">Useful Links</h5>
                <ul class="list-unstyled">
                    <li><a href="#" class="text-muted text-decoration-none py-1 d-block">DMCA</a></li>
                    <li><a href="#" class="text-muted text-decoration-none py-1 d-block">Disclaimer</a></li>
                    <li><a href="#" class="text-muted text-decoration-none py-1 d-block">Privacy Policy</a></li>
                    <li><a href="#" class="text-muted text-decoration-none py-1 d-block">Terms & Conditions</a></li>
                    <li><a href="#" class="text-muted text-decoration-none py-1 d-block">Sitemap</a></li>
                    <li><a href="#" class="text-muted text-decoration-none py-1 d-block">Contact Us</a></li>
                    <li><a href="#" class="text-muted text-decoration-none py-1 d-block">About Us</a></li>
                </ul>
            </div>
            <div class="col-md-4 mb-3">
                <h5 class="text-white mb-3">Follow Us</h5>
                <div class="social-icons">
                    <a href="#" class="text-white me-3" aria-label="Follow us on Facebook"><i class="fab fa-facebook-f fa-lg"></i></a>
                    <a href="#" class="text-white me-3" aria-label="Follow us on Twitter"><i class="fab fa-twitter fa-lg"></i></a>
                    <a href="#" class="text-white me-3" aria-label="Follow us on Pinterest"><i class="fab fa-pinterest-p fa-lg"></i></a>
                    <a href="#" class="text-white me-3" aria-label="Follow us on Instagram"><i class="fab fa-instagram-fa-lg"></i></a>
                    <a href="#" class="text-white" aria-label="Follow us on Telegram"><i class="fab fa-telegram-plane fa-lg"></i></a>
                </div>
            </div>
        </div>

        <hr class="border-secondary my-4"> {# Separator line #}

        <div class="text-center text-muted small">
            FileCR Clone © 2024-{% now "Y" %}. All Rights Reserved.
        </div>
    </div>
</footer>

{# Bootstrap JavaScript Bundle (with Popper) CDN - place at end of body for performance #}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
{# NEW: This block is for custom JS files #}
{% block extra_js %}{% endblock %} 

</body>
</html>